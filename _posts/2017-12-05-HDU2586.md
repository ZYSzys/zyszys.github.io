---
layout: post
category: ACM
title: HDU 2856 How far away?
tags:
    BFS
    LCA
---
[HDU 2856 How far away?](http://acm.hdu.edu.cn/showproblem.php?pid=2586)

BFSæ¨¡æ‹Ÿä¸€éï¼Œçœ‹äº†é¢˜è§£æ‰çŸ¥é“è¿™æ˜¯LCA(æœ€è¿‘å…¬å…±ç¥–å…ˆ)æ¨¡æ¿é¢˜ğŸ¤•......  
LCAè§£æ³•å¾…è¡¥ä¸­ï½ï½ï½
<!--more-->
# How far away ï¼Ÿ

Time Limit: 2000/1000 MS (Java/Others)    Memory Limit: 32768/32768 K (Java/Others)
Total Submission(s): 19082    Accepted Submission(s): 7454


## Problem Description
There are n houses in the village and some bidirectional roads connecting them. Every day peole always like to ask like this "How far is it if I want to go from house A to house B"? Usually it hard to answer. But luckily int this village the answer is always unique, since the roads are built in the way that there is a unique simple path("simple" means you can't visit a place twice) between every two houses. Yout task is to answer all these curious people.
 

### Input
First line is a single integer T(T<=10), indicating the number of test cases.
  For each test case,in the first line there are two numbers n(2<=n<=40000) and m (1<=m<=200),the number of houses and the number of queries. The following n-1 lines each consisting three numbers i,j,k, separated bu a single space, meaning that there is a road connecting house i and house j,with length k(0 < k <= 40000).The houses are labeled from 1 to n.
  Next m lines each has distinct integers i and j, you areato answer the distance between house i and house j.
 

### Output
For each test case,output m lines. Each line represents the answer of the query. Output a bland line after each test case.
 

### Sample Input
```
2
3 2
1 2 10
3 1 15
1 2
2 3

2 2
1 2 100
1 2
2 1
```

### Sample Output
```
10
25
100
100
```


## ä»£ç 
```c++
#include <cstdio>
#include <vector>
#include <stack>
#include <cstring>
using namespace std;
const int N = 40010;
int t, n, m, dis[N];
bool vis[N];
vector<int>adj[N];
vector<int>wei[N];
void init(int n)
{
    for(int i = 0; i <= n; i++)
    {
        adj[i].clear();
        wei[i].clear();
    }
}
int BFS(int x, int y)
{
    int res = 0;
    memset(vis, false,sizeof(vis));
    memset(dis, 0, sizeof(dis));

    stack<int>s;
    s.push(x);
    vis[x] = true;
    while(!s.empty())
    {
        int tx = s.top();
        s.pop();
        if(tx == y)
            break;
        for(int i = 0; i < adj[tx].size(); i++)
        {
            int ty = adj[tx][i];
            if(vis[ty])
                continue;
            s.push(ty);
            vis[ty] = true;
            dis[ty] = dis[tx] + wei[tx][i];
        }
    }
    return dis[y];
}
int main()
{
    scanf("%d", &t);
    while(t--)
    {
        scanf("%d%d", &n, &m);
        int a, b, w;
        init(n);
        for(int i = 0; i < n-1; i++)
        {
            scanf("%d%d%d", &a, &b, &w);
            adj[a].push_back(b);
            adj[b].push_back(a);
            wei[a].push_back(w);
            wei[b].push_back(w);
        }
        for(int i = 0; i < m; i++)
        {
            scanf("%d%d", &a, &b);
            printf("%d\n", BFS(a, b));
        }
        if(t)
            printf("\n");
    }
    return 0;
}
```
